!function(){"use strict";angular.module("app",["blockUI"])}(),function(){"use strict";function e(e){function i(){e.query().then(function(e){r.reviews=e})}function t(){if(!r.reviews.length)return 0;var e=r.reviews.reduce(function(e,i){return e+i.rating},0);return Math.round(e/r.reviews.length)}function s(e){return"any"===e?r.reviews.length:r.reviews.filter(function(i){return i.user.type===e}).length}function a(e){return r.reviews.filter(function(i){return i.rating===e}).length}function l(i){e.helpful(i.id).then(function(){i.helpful_count++})}function n(i){e.notHelpful(i.id).then(function(){i.not_helpful_count++})}var r=this;r.reviews=[],r.filters=[{label:"Everyone",type:"any"},{label:"Readers",type:"reader",filterProp:{user:{type:"reader"}}},{label:"Critics",type:"critic",filterProp:{user:{type:"critic"}}},{label:"Editors",type:"editor",filterProp:{user:{type:"editor"}}},{label:"Librarians",type:"librarian",filterProp:{user:{type:"librarian"}}},{label:"Bloggers",type:"blogger",filterProp:{user:{type:"blogger"}}}],r.filterProp=void 0,r.orders=[{label:"Most Helpful",title:"Most Helpful",prop:["-helpful_count","+not_helpful_count"]},{label:"Highest Rating",title:"Highest Rated",prop:"-rating"},{label:"Newest First",title:"Newest",prop:"-date"}],r.order=r.orders[0],r.averageRating=t,r.reviewCountByUserType=s,r.reviewCountByRating=a,r.helpful=l,r.notHelpful=n,i()}angular.module("app").controller("MainController",e),e.$inject=["ReviewService"]}(),function(){function e(e){function i(){function e(e){return e.headers["X-client_id"]="110aff0820835c55266969626419d51d5d9e6892cb827acb75fc71ed9ca72344",e}return{request:e}}e.interceptors.push(i)}angular.module("app").config(e),e.$inject=["$httpProvider"]}(),function(){angular.module("app").constant("API_URL","https://vngrs-challenge.herokuapp.com/api/")}(),function(){function e(e,i){function t(){return i.get(e+"reviews").then(function(e){return e.data.data})}function s(e){return l(e,!0)}function a(e){return l(e,!1)}function l(t,s){return i.post(e+"reviews/"+t+"/vote",{type:s?"helpful":"not_helpful"}).then(function(e){return e.data})}this.query=t,this.helpful=s,this.notHelpful=a}angular.module("app").service("ReviewService",e),e.$inject=["API_URL","$http"]}(),angular.module("app").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container" ng-controller="MainController as vm"> <div class="page-title"> <div class="text"> <div class="book">Book</div> <div class="reviews">Reviews</div> </div> <div class="review-stats"> <div class="average"> <span ng-repeat="i in [1, 2, 3, 4, 5]" class="star glyphicon glyphicon-star" ng-class="{active: vm.averageRating() >= i}"> </span> </div> <div class="total"> {{vm.reviews.length}} Total Reviews </div> </div> </div> <div class="ribbons-title"> See reviews from: </div> <div class="row"> <div class="main-content col-sm-9"> <div class="reviews-header"> <div class="ribbons"> <span ng-repeat="f in vm.filters" ng-click="vm.filterProp = f.filterProp" class="ribbon {{f.type}}" ng-class="{active: vm.filterProp === f.filterProp}"> <span>{{f.label}}</span> <span>({{vm.reviewCountByUserType(f.type)}})</span> </span> </div> <div class="sorting"> <div class="selected"> <div class="title">{{vm.order.title}}</div> <div class="reviews">Reviews</div> </div> <label class="select pull-right"> <span class="sort-by">Sort by:</span> <select ng-model="vm.order" class="btn" ng-options="item as item.label for item in vm.orders"> </select> </label> </div> </div> <div class="reviews-list"> <div class="review-item" ng-repeat="review in vm.reviews | filter:vm.filterProp | orderBy:vm.order.prop | limitTo:3"> <div class="review-header"> <div class="review-meta"> <div class="date">{{review.date | date:\'MMMM d, y\'}}</div> <div class="user">{{review.user.firstname}} {{review.user.lastname}}</div> <div class="book-type">{{review.book_type}}</div> </div> <div class="review-rating"> <span ng-repeat="i in [1, 2, 3, 4, 5]" class="star glyphicon glyphicon-star" ng-class="{active: review.rating >= i}"> </span> </div> <div class="review-title">{{review.title}}</div> </div> <div class="review-content"> {{review.content | limitTo:1000}} </div> <div class="review-footer"> <a href="" class="read-more" ng-if="review.content.length > 1000"> Read more... </a> <div class="helpful-stats"> {{review.helpful_count}} out of {{review.helpful_count + review.not_helpful_count}} found this review helpful. </div> <div class="actions"> <span class="is-this-helpful">Was this review helpful to you?</span> <a class="vote helpful" href="" ng-click="vm.helpful(review)"> <i class="glyphicon glyphicon-thumbs-up"></i> Helpful </a> <a class="vote not-helpful" href="" ng-click="vm.notHelpful(review)"> <i class="glyphicon glyphicon-thumbs-down"></i> Not Helpful </a> <a class="flag" href=""> <i class="glyphicon glyphicon-flag"></i> Flag This Content For Review </a> </div> </div> </div> </div> <div class="reviews-footer"> <button class="btn btn-default see-all-reviews"> See all {{vm.reviews.length}} reviews <i class="glyphicon glyphicon-chevron-right"></i> </button> <button class="add-a-review btn btn-primary pull-right"> <i class="glyphicon glyphicon-comment"></i> Add a review </button> </div> </div> <div ng-include="\'app/sidebar/sidebar.html\'" class="sidebar col-sm-3"> </div> </div> </div> '),e.put("app/navbar/navbar.html",'<nav class="navbar navbar-inverse navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <img src="/assets/images/logo.png"> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li> <form class="navbar-form"> <div class="input-group search"> <input class="form-control" name="search-input" placeholder="Search by Title, Author, Genre, Keyword..."> <div class="input-group-btn"> <button class="btn btn-default"> <i class="glyphicon glyphicon-search"></i> </button> </div> </div> </form> </li> <li><a href="">Recommendations</a></li> <li><a href="">Subjects <span class="caret"></span></a></li> <li class="sign-in"><a href="">Sign in | Register</a></li> <li class="shopping-cart"> <a href=""> <i class="glyphicon glyphicon-shopping-cart"></i> 0 </a> </li> </ul> </div> </div> </nav> '),e.put("app/sidebar/sidebar.html",'<div class="review-stats"> <div class="average-rating"> <div class="in-stars"> <span ng-repeat="i in [1, 2, 3, 4, 5]" class="star glyphicon glyphicon-star" ng-class="{active: vm.averageRating() >= i}"> </span> </div> <div class="in-words"> Average Rating: {{vm.averageRating()}} out of 5 stars </div> </div> <div class="histogram"> <div class="item" ng-repeat="i in [5, 4, 3, 2, 1]"> <div class="star-count">{{i}} STAR</div> <div class="bar"> <div class="filled" ng-style="{\'width\': vm.reviewCountByRating(i)*100/vm.reviews.length + \'%\'}"> </div> </div> <div class="rating-count"> ({{vm.reviewCountByRating(i)}}) </div> </div> </div> <div class="footer"> <a class="view-all-reviews"> View all {{vm.reviews.length}} reviews </a> <button class="add-a-review btn btn-primary"> <i class="glyphicon glyphicon-comment"></i> Add a review </button> </div> </div> <div class="cart-wrapper"> <div class="cart"> <div class="book-type">Paperback</div> <div class="price">$2.00</div> <button class="btn btn-block btn-warning add-to-cart"> Add to cart </button> <button class="btn btn-block btn-default buy-elsewhere"> Buy elsewhere <i class="glyphicon glyphicon-chevron-down"></i> </button> <div class="or">-OR-</div> <button class="btn btn-block btn-danger buy-ebook-now"> Buy ebook now </button> </div> </div> ')}]);
//# sourceMappingURL=../maps/scripts/app-95ab2436df.js.map
